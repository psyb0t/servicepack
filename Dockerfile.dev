# Development Dockerfile for PIrateRF
FROM golang:1.24.6-alpine

# Install build dependencies, sox, and ffmpeg
RUN apk add --no-cache \
    make \
    gcc \
    musl-dev \
    bash

# Set working directory
WORKDIR /app

# Copy source code
COPY . .

# Set env vars
ENV ENV=dev
ENV LOG_LEVEL=debug
ENV LOG_FORMAT=text
ENV LOG_CALLER=true
ENV SERVICES_ENABLED=

# Default command - shows available make targets
CMD ["make", "help"]

# Development commands you can run:
# docker build -f Dockerfile.dev -t piraterf-dev .
# docker run -it --rm piraterf-dev make build
# docker run -it --rm piraterf-dev make test
# docker run -it --rm piraterf-dev make lint
# docker run -it --rm piraterf-dev make coverage
# docker run -it --rm piraterf-dev bash  # for interactive shell
